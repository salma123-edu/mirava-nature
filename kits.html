<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Coffrets - MIRAVA NATURE</title>
  <link rel="stylesheet" href="css/style.css?v=3.1" />
</head>

<body>
  <header>
    <div class="container">
      <a href="index.html">
        <img src="images/logo.png" alt="Logo Mirava Nature" />
      </a>
      <button class="mobile-menu-toggle">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <nav>
        <a href="index.html">Accueil</a>
        <a href="products.html">Produits</a>
        <a href="kits.html">Coffrets</a>
        <a href="contact.html">Contact</a>
        <div id="auth-nav-area" class="auth-btn-group"></div>

        <div class="cart-container">
          <button id="cart-toggle" class="cart-btn">ðŸ›’ Panier (<span id="cart-count">0</span>)</button>
          <div id="mini-cart" class="mini-cart">
            <h4>Votre panier</h4>
            <div id="mini-cart-items"></div>
            <p id="mini-cart-total"></p>
            <a href="panier.html" class="btn-mini-cart">Voir le panier</a>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <section id="kits">
    <div class="container">
      <h2>Nos coffrets</h2>
      <div id="kits-grid" class="products-grid"></div>
    </div>
  </section>

  <footer>
    <div class="container">
      <p>
        &copy; 2025 MIRAVA NATURE |
        <a href="https://instagram.com">Instagram</a> |
        <a href="https://facebook.com">Facebook</a>
      </p>
    </div>
  </footer>

  <script src="js/auth.js"></script>
  <script src="js/main.js"></script>
  <script src="js/cart.js"></script>
  <script src="products-data.js"></script>
  <script src="kits-data.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const container = document.getElementById('kits-grid');
      if (!container) return;
      Object.values(allKits).forEach(kit => {
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML = `
      <a href="kit-detail.html?id=${encodeURIComponent(kit.id)}" class="product-link">
        <img src="${kit.image}" alt="${kit.name}" class="product-thumb"/>
        <div class="body">
            <h3>${kit.name}</h3>
            <p class="short-desc">${kit.short_description || ''}</p>
            <div class="actions" style="display:flex;justify-content:space-between;align-items:center">
                <span class="price">${kit.price} MAD</span>
                <button class="btn-premium btn-small add-to-cart" data-id="${kit.id}" data-name="${kit.name}" data-price="${kit.price}">Ajouter</button>
            </div>
        </div>
      </a>
    `;
        container.appendChild(card);
        const btn = card.querySelector('.add-to-cart');
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          const item = { id: kit.id, name: kit.name, price: kit.price, qty: 1 };
          if (typeof window.addToCart === 'function') {
            window.addToCart(item);
          }
          btn.textContent = 'âœ…';
          setTimeout(() => btn.textContent = 'Ajouter', 1000);
        });
      });
    });
  </script>
</body>

</html>